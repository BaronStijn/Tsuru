---
Files:
  - powerup.cpp
Hooks:
# Table extensions
  - type: branch
    instr: bl
    addr: "0x2924CC8"
    func: UseCustomPowerupCenterOffsetTable
  - type: branch
    instr: b
    addr: "0x2925128"
    func: UseCustomPowerupTallTypeTable
  - type: branch
    instr: b
    addr: "0x292ea80"
    func: UseCustomBlahTableOffsets
  - type: branch
    instr: bl
    addr: "0x29279C4"
    func: UseCustomArray_1016CD68
  - type: branch
    instr: b
    addr: "0x2975C94"
    func: UseCustomArray_101750A4

# Model
  # Redirect tex anim arrays
  - type: branch
    instr: bl
    addr: "0x296D570"
    func: UseCustomPowerupSwitchTexAnimArray1
  - type: branch
    instr: bl
    addr: "0x296D5BC"
    func: UseCustomPowerupSwitchTexAnimArray3
  - type: branch
    instr: bl
    addr: "0x296D608"
    func: UseCustomPowerupSwitchTexAnimArray2
  - type: branch
    instr: bl
    addr: "0x296D618"
    func: UseCustomPowerupSwitchTexAnimArray4

# Patch checks
  # Check if we should give new powerup
  - type: branch
    instr: b
    addr: "0x2931b34" # Player::shouldGiveNewPowerup()
    func: ShouldGiveNewPowerup
  # Correct change sound
  - type: branch
    instr: b
    addr: "0x2975b90"
    func: PowerupChangeSoundEffect

# Throwing
  # Spawn the custom projectile
  - type: branch
    instr: bl
    addr: "0x293ade0" # Player::throwProjectile()
    func: ProjectileProfileIDs
  # Pick a sound effect
  - type: branch
    instr: bl
    addr: "0x293ADD4"
    func: ProjectileSelectSFX
  # Allow checking if we can throw projectile from custom type
  - type: branch
    instr: bl
    addr: "0x293adbc" # Player::throwProjectile()
    func: ProjectileExtraTypes
  - type: branch
    instr: b
    addr: "0x293acc0" # Player::shouldThrowProjectile()
    func: ShouldThrowProjectile
  - type: branch
    instr: bl
    addr: "0x293b148" # Player::FUN_293b080()
    func: AllowThrowingProjectile
  - type: branch
    instr: bl
    addr: "0x293abc8" # Player::FUN_293abb8()
    func: AnotherProjectilePowerupCheck
  - type: branch
    instr: b
    addr: "0x293ac38" # Player::FUN_293AC38()
    func: ShouldThrowProjectile_2
  # Set projectile parent
  - type: branch
    instr: bl
    addr: "0x293adb8" # Player::throwProjectile
    func: ProjectileParentID

# Projectile patches
  # Hammer
  - type: branch
    instr: bl
    addr: "0x217CF98" # Hammer::build()
    func: HammerSetParentID
  - type: nop
    addr: "0x217D080" # Hammer::build()
  - type: branch
    instr: b
    addr: "0x217D128" # Hammer::build()
    func: HammerShootInit
  - type: branch
    instr: bl
    addr: "0x217b684" # Hammer::executeState_Unk0N
    func: HammerStateCheckASM
  - type: branch
    instr: bl
    addr: "0x217b700" # Hammer::executeState_Unk0N
    func: HammerShootStateASM
